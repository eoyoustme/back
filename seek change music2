--// Dịch vụ
local Workspace = game:GetService("Workspace")

--// Link nhạc
local seekMusicURL = "https://github.com/eoyoustme/back/raw/main/seek%20chase%20new.mp3?raw=true"

--// Hàm tải và phát nhạc GitHub
function GitAud(soundgit, filename)
	local url = soundgit
	local FileName = filename
	writefile(FileName..".mp3", game:HttpGet(url))
	return (getcustomasset or getsynasset)(FileName..".mp3")
end

function CustomGitSound(soundlink, vol, filename)
	local sound = Instance.new("Sound")
	sound.SoundId = GitAud(soundlink, filename)
	sound.Volume = vol or 1
	sound.Name = "SeekMusic"
	sound.Parent = workspace
	sound:Play()
	return sound
end

--// Theo dõi Seek spawn
Workspace.ChildAdded:Connect(function(child)
	if string.find(string.lower(child.Name), "seek") then
		print("[DOORS] Seek chase bắt đầu — phát nhạc!")

		local old = workspace:FindFirstChild("SeekMusic")
		if old then old:Destroy() end

		local seekSound = CustomGitSound(seekMusicURL, 5, "SeekChaseTheme")

		child.AncestryChanged:Connect(function(_, parent)
			if not parent then
				print("[DOORS] Seek biến mất — dừng nhạc.")
				if seekSound and seekSound:IsDescendantOf(workspace) then
					seekSound:Stop()
					task.wait(0.5)
					seekSound:Destroy()
				end
			end
		end)
	end
end)
