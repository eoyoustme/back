-- ðŸ§Š Frost Entity Script (phiÃªn báº£n báº­t toÃ n bá»™ hiá»‡u á»©ng)
game.ReplicatedStorage.GameData.LatestRoom.Changed:Wait()

function GetRoom()
    local gruh = workspace.CurrentRooms
    return gruh:FindFirstChild(game.ReplicatedStorage.GameData.LatestRoom.Value)
end

local plr = game.Players.LocalPlayer
local chr = plr.Character or plr.CharacterAdded:Wait()
local tweenservice = game:GetService("TweenService")

-- âš™ï¸ Táº£i model tá»« Asset ID hoáº·c GitHub
function LoadCustomInstance(source, parent)
    local model

    local function NormalizeGitHubURL(url)
        if url:match("^https://github.com/.+%.rbxm$") and not url:find("?raw=true") then
            return url .. "?raw=true"
        end
        return url
    end

    while task.wait() and not model do
        if tonumber(source) then
            local success, result = pcall(function()
                return game:GetObjects("rbxassetid://" .. tostring(source))[1]
            end)
            if success and result then
                model = result
            end
        elseif typeof(source) == "string" and source:match("^https?://") and source:match("%.rbxm") then
            local url = NormalizeGitHubURL(source)
            local success, result = pcall(function()
                local filename = "temp_" .. math.random(100000, 999999) .. ".rbxm"
                local content = game:HttpGet(url)
                if writefile and (getcustomasset or getsynasset) and isfile and delfile then
                    writefile(filename, content)
                    local assetFunc = getcustomasset or getsynasset
                    local obj = game:GetObjects(assetFunc(filename))[1]
                    delfile(filename)
                    return obj
                else
                    warn("Executor khÃ´ng há»— trá»£ file APIs.")
                    return nil
                end
            end)
            if success and result then
                model = result
            end
        else
            break
        end

        if model then
            model.Parent = parent or workspace
            for _, obj in ipairs(model:GetDescendants()) do
                if obj:IsA("Script") or obj:IsA("LocalScript") then
                    obj:Destroy()
                end
            end
            pcall(function()
                model:SetAttribute("LoadedByExecutor", true)
            end)
        end
    end

    return model
end

-- ðŸ”½ Táº£i Frost entity tá»« GitHub
local s = LoadCustomInstance("https://github.com/eoyoustme/back/raw/refs/heads/main/frs.rbxm", workspace)
if not s then
    warn("KhÃ´ng thá»ƒ táº£i Frost entity.")
    return
end

local entity = s:FindFirstChildWhichIsA("BasePart")
entity.CFrame = GetRoom():WaitForChild("RoomEntrance").CFrame * CFrame.new(0, 5, -15)
entity.Part.CFrame = entity.CFrame

pcall(function() entity.Ambience:Stop() end)
pcall(function() entity.AmbienceFar:Stop() end)
-- ðŸ’¡ Ãnh sÃ¡ng xuáº¥t hiá»‡n
local pointLight = Instance.new("PointLight")
pointLight.Color = Color3.new(255, 255, 255)
pointLight.Range = 60
pointLight.Brightness = 99999
pointLight.Parent = entity

tweenservice:Create(pointLight, TweenInfo.new(3), {Brightness = 0}):Play()

-- ðŸŽµ Ã‚m thanh xuáº¥t hiá»‡n
local sound = Instance.new("Sound")
sound.SoundId = "rbxassetid://137044859218769"
sound.Looped = false
sound.Volume = 5
sound.Parent = s
sound:Play()

-- â„ï¸ Hiá»‡u á»©ng láº¡nh
local frost = Instance.new("ColorCorrectionEffect")
frost.Parent = game.Lighting
tweenservice:Create(frost, TweenInfo.new(10), {
    TintColor = Color3.fromRGB(0, 0, 255),
    Saturation = -0.7,
    Contrast = 0.2
}):Play()

-- âŒ Táº¯t hiá»‡u á»©ng ban Ä‘áº§u
for _, v in ipairs({"face", "Heylois", "BlackTrai2l", "BlackTrai3l"}) do
    if entity:FindFirstChild("Attachment") and entity.Attachment:FindFirstChild(v) then
        entity.Attachment[v].Enabled = false
    end
end

wait(8)

-- âœ… Báº­t láº¡i táº¥t cáº£ hiá»‡u á»©ng (Attachment + Particle)
-- Báº­t láº¡i 4 hiá»‡u á»©ng trong Attachment
for _, v in ipairs({"face", "Heylois", "BlackTrai2l", "BlackTrai3l"}) do
    if entity:FindFirstChild("Attachment") and entity.Attachment:FindFirstChild(v) then
        entity.Attachment[v].Enabled = true
    end
end

-- Báº­t táº¥t cáº£ particle trong Frostbite > FrostyNew > part
local frostbiteModel = s:FindFirstChild("Frostbite")
if frostbiteModel then
    local frostyNew = frostbiteModel:FindFirstChild("FrostyNew")
    if frostyNew then
        local frostPart = frostyNew:FindFirstChild("part")
        if frostPart then
            for _, particle in ipairs(frostPart:GetDescendants()) do
                if particle:IsA("ParticleEmitter") then
                    particle.Enabled = true
                end
            end
        end
    end
end

-- ðŸŽµ PhÃ¡t Ã¢m thanh ambience
pcall(function() entity.Ambience:Play() end)
pcall(function() entity.AmbienceFar:Play() end)

-- ðŸ”¥ GÃ¢y sÃ¡t thÆ°Æ¡ng náº¿u khÃ´ng cÃ³ báº­t lá»­a
local dmg = true
task.spawn(function()
    while dmg do
        wait(1)
        local lighter = chr:FindFirstChild("Lighter")
        if not lighter then
            pcall(function()
                chr.Humanoid.Health -= 3
                game.ReplicatedStorage.GameStats["Player_" .. plr.Name].Total.DeathCause.Value = "Frostbite"
            end)
        end
    end
end)

-- ðŸ›‘ Khi chuyá»ƒn phÃ²ng
game.ReplicatedStorage.GameData.LatestRoom.Changed:Wait()
dmg = false

-- Táº¯t cÃ¡c hiá»‡u á»©ng khi rá»i phÃ²ng
for _, v in ipairs({"face", "Heylois", "BlackTrai2l", "BlackTrai3l"}) do
    if entity:FindFirstChild("Attachment") and entity.Attachment:FindFirstChild(v) then
        entity.Attachment[v].Enabled = false
    end
end

-- Táº¯t particle trong Frostbite > FrostyNew > part
if frostbiteModel then
    local frostyNew = frostbiteModel:FindFirstChild("FrostyNew")
    if frostyNew then
        local frostPart = frostyNew:FindFirstChild("part")
        if frostPart then
            for _, particle in ipairs(frostPart:GetDescendants()) do
                if particle:IsA("ParticleEmitter") then
                    particle.Enabled = false
                end
            end
        end
    end
end

-- Ã‚m thanh dá»«ng vÃ  biáº¿n máº¥t
pcall(function() entity.Ambience:Stop() end)
pcall(function() entity.AmbienceFar:Stop() end)

local des = Instance.new("Sound")
des.SoundId = "rbxassetid://111715441853991"
des.Looped = false
des.Volume = 2.5
des.Parent = s
des:Play()

wait(5)
s:Destroy()

-- ðŸŒˆ HoÃ n tÃ¡c hiá»‡u á»©ng láº¡nh
tweenservice:Create(frost, TweenInfo.new(5), {
    TintColor = Color3.fromRGB(255, 255, 255),
    Saturation = 0,
    Contrast = 0
}):Play()
wait(5)
frost:Destroy()
